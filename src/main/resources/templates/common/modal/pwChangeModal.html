<!-- /templates/common/modal/pwChangeModal.html -->
<div th:fragment="pwChangeModal">

	<!-- 모달 배경 -->
	<div class="modal-backdrop fade" id="pwChangeBackdrop"
		style="display: none;"></div>

	<!-- 모달 본체 -->
	<div class="modal" id="pwChangeModal" tabindex="-1" role="dialog"
		aria-modal="true" aria-labelledby="pwChangeModalLabel"
		style="display: none;">

		<form id="pwChangeForm" onsubmit="return false;">
			<div class="modal-dialog modal-dialog-centered"
				style="--bs-modal-width: 480px;">
				<input type="text" name="username" id="pwChangeUsername"
					autocomplete="username" value="[[${session.LOGIN_EMP.loginId}]]"
					class="visually-hidden" aria-hidden="true">
				<div class="modal-content">

					<!-- ================== BODY ================== -->
					<div class="modal-body">
						<!-- 타이틀 + 닫기 버튼 -->
						<div
							class="d-flex justify-content-between align-items-center mb-3">
							<h5 class="modal-title mb-0" id="pwChangeModalLabel">비밀번호 변경</h5>

							<button type="button" class="btn-close" id="pwChangeCloseBtn"
								aria-label="Close"></button>
						</div>

						<!-- 현재 비밀번호 -->
						<div class="mb-3">
							<label for="currentPassword" class="form-label">현재 비밀번호</label> <input
								type="password" id="currentPassword" class="form-control"
								autocomplete="current-password" placeholder="현재 비밀번호를 입력하세요">
						</div>

						<!-- 새 비밀번호 -->
						<div class="mb-3">
							<label for="newPassword" class="form-label">새 비밀번호</label> <input
								type="password" id="newPassword" class="form-control"
								autocomplete="new-password" placeholder="새 비밀번호를 입력하세요">
						</div>

						<!-- 새 비밀번호 확인 -->
						<div class="mb-3">
							<label for="confirmPassword" class="form-label">새 비밀번호 확인</label>
							<input type="password" id="confirmPassword" class="form-control"
								autocomplete="new-password" placeholder="새 비밀번호를 다시 입력하세요">
						</div>

						<!-- 비밀번호 정책 안내 -->
						<div class="mt-2 mb-2 small text-muted" id="pwPolicyInfoBox">
							<i class="bi bi-info-circle me-1"></i>
							<!-- 1) 안내 문구 (guide) -->
							<span id="pwPolicyGuide">비밀번호 정책을 불러오는 중입니다.</span><br>
							<!-- 2) 길이 안내 (lengthText) -->
							<span id="pwPolicyLength"></span>
							<!-- 3) 조합 규칙 (ruleHtml, <br> 포함 가능) -->
							<div id="pwPolicyRules" class="mt-1"></div>
						</div>

						<!-- ▼ 검증 실패 시 노출되는 경고 영역 -->
						<div id="pwChangeErrorBox"
							class="alert alert-danger small d-none mt-2 mb-0" role="alert">
							<i class="bi bi-exclamation-triangle-fill me-1"></i>
							<!-- 서버/JS에서 문자열 한 줄 내려주고, 필요하면 <br>로 줄바꿈 -->
							<span id="pwChangeErrorMsg">비밀번호 규칙을 확인해주세요.</span>
						</div>

						<!-- 하단 설명 문구 -->
						<p class="mt-3 mb-0 text-muted small">
							저장 버튼을 누르면 비밀번호를 변경할 수 있습니다.<br> 비밀번호는 시스템에 설정된 비밀번호 정책을
							준수해야 합니다.
						</p>
					</div>
					<!-- /.modal-body -->

					<!-- ================== FOOTER (버튼만) ================== -->
					<div class="modal-footer justify-content-center">
						<button type="button" class="btn btn-dark ms-2"
							id="pwChangeSaveBtn">저장</button>

						<button type="button" class="btn btn-outline-secondary"
							id="pwChangeCancelBtn">다음에 변경하기</button>
					</div>

				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</form>
	</div>
	<!-- /.modal -->